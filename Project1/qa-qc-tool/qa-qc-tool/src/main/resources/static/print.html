<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QA-QC-Tool</title>
    <link rel="stylesheet" href="stylesheet.css" />
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
        function showData() {
             $.ajax({
    	        url: "http://localhost:8080/print",
    	            success: function(data){
    	               console.log(data);
    	               var table = document.getElementById('resultTable');
    	               if (data == "No errors detected in file. File Upload is successful.") {
    	                    table.remove();
                            var messageLabel = document.getElementById('success');
                            messageLabel.innerHTML = data;
    	               } else {
    	                    let tableData = data.split(",");
    	                    console.log(tableData);
    	                    table.createTBody();
    	                    var tableBodyRef = table.getElementsByTagName('tbody')[0];
    	                    for (let i = 0; i < tableData.length; i++) {
    	                        let tableDataString = tableData[i] + "";
    	                        let rowData = tableDataString.split("|");
                                var row = tableBodyRef.insertRow();
                                var cell0 = row.insertCell(0);
                                var element = document.createElement("LABEL");
                                element.innerHTML = i + 1;
                                cell0.append(element);
                                var cell1 = row.insertCell(1);
                                var element1 = document.createElement("LABEL");
                                element1.innerHTML = rowData[0];
                                cell1.appendChild(element1);
                                var cell2 = row.insertCell(2)
                                var element2 = document.createElement("LABEL");
                                element2.innerHTML = rowData[2];
                                cell2.appendChild(element2);
                                var cell3 = row.insertCell(2);
                                var element3 = document.createElement("LABEL");
                                element3.innerHTML = rowData[1];
                                cell3.appendChild(element3);
    	                    }
    	               }
    	            },
    	        error: function() {
    		        alert("There was an error.");
    	        }
            });
        }
    </script>
</head>
<body onload="showData()">
<div class="content-wrapper">
    <img src="./background.jpeg">
    <div class="mainHeading">
        <h1> Results </h1>
    </div>
</div>
<div class="tableContainer">
    <p id="success" class="info"> </p>
    <table style="overflow: auto;" class="content-table" id="resultTable">
        <thead>
        <tr>
            <th> Error No. </th>
            <th> Row </th>
            <th> Column </th>
            <th> Description </th>
        </tr>
        </thead>
    </table>
    <tbody></tbody>
</div>

</body>
</html>